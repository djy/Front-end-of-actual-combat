(window["webpackJsonp"] = window["webpackJsonp"] || []).push([["line"],{

/***/ "rhlo":
/*!****************************!*\
  !*** ./src/line/index.css ***!
  \****************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {


var content = __webpack_require__(/*! !../../node_modules/css-loader/dist/cjs.js!./index.css */ "sIYj");

if(typeof content === 'string') content = [[module.i, content, '']];

var transform;
var insertInto;



var options = {"hmr":true}

options.transform = transform
options.insertInto = undefined;

var update = __webpack_require__(/*! ../../node_modules/style-loader/lib/addStyles.js */ "aET+")(content, options);

if(content.locals) module.exports = content.locals;

if(true) {
	module.hot.accept(/*! !../../node_modules/css-loader/dist/cjs.js!./index.css */ "sIYj", function() {
		var newContent = __webpack_require__(/*! !../../node_modules/css-loader/dist/cjs.js!./index.css */ "sIYj");

		if(typeof newContent === 'string') newContent = [[module.i, newContent, '']];

		var locals = (function(a, b) {
			var key, idx = 0;

			for(key in a) {
				if(!b || a[key] !== b[key]) return false;
				idx++;
			}

			for(key in b) idx--;

			return idx === 0;
		}(content.locals, newContent.locals));

		if(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');

		update(newContent);
	});

	module.hot.dispose(function() { update(); });
}

/***/ }),

/***/ "sIYj":
/*!******************************************************************!*\
  !*** ./node_modules/css-loader/dist/cjs.js!./src/line/index.css ***!
  \******************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

exports = module.exports = __webpack_require__(/*! ../../node_modules/css-loader/dist/runtime/api.js */ "JPst")(false);
// Module
exports.push([module.i, ".chart {\n    background:rgba(37,39,46,1);\n}\n\n.chart text{\n    fill: white;\n    font: 10px sans-serif;\n    text-anchor: end;\n}\n\n.chart .axis text {\n    font: 10px sans-serif;\n}\n\n.chart .axis path, .chart .axis line {\n    fill: none;\n    stroke: white;\n    shape-rendering: crispEdges;\n}\n\n.voronoi path {\n    fill: none;\n    pointer-events: all;\n}\n  \n.voronoi--show path {\n    stroke: red;\n    stroke-opacity: 0.2;\n}\n\n.city--hover {\n    stroke: red;\n}\n\n.cities {\n    fill: none;\n    stroke: #aaa;\n    stroke-linejoin: round;\n    stroke-linecap: round;\n    stroke-width: 1.5px;\n}\n\n.focus text {\n    text-anchor: middle;\n    text-shadow: 0 1px 0 #fff, 1px 0 0 #fff, 0 -1px 0 #fff, -1px 0 0 #fff;\n}", ""]);


/***/ }),

/***/ "uSaw":
/*!***************************!*\
  !*** ./src/line/index.ts ***!
  \***************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var d3__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! d3 */ "VphZ");
/* harmony import */ var _index_css__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./index.css */ "rhlo");
/* harmony import */ var _index_css__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_index_css__WEBPACK_IMPORTED_MODULE_1__);


document.body.innerHTML = '';
const config = {
    chartWidth: 600,
    chartHeight: 300,
    chartMarginL: 50,
    chartMarginR: 50,
    chartMarginT: 50,
    chartMarginB: 50,
};
const lineChart = (Config, ChartData) => {
    const svg = generateSvg();
    const x = generateX();
    const y = generateY();
    generateLine();
    generatePoint();
    const tooltip = generateTooltip();
    handleInteractive();
    function generateSvg() {
        return d3__WEBPACK_IMPORTED_MODULE_0__["select"]('body')
            .append('svg')
            .attr('fill', 'none')
            .attr('stroke-linejoin', 'round')
            .attr('stroke-linecap', 'round')
            .attr('class', 'chart')
            .style('width', Config.chartWidth)
            .style('height', Config.chartHeight);
    }
    function generateX() {
        const tx = d3__WEBPACK_IMPORTED_MODULE_0__["scaleTime"]()
            .domain([new Date(ChartData[0].values[0].month), new Date(ChartData[0].values[ChartData[0].values.length - 1].month)])
            .range([0, config.chartWidth - config.chartMarginR - config.chartMarginL]);
        // ------x轴------
        const fomateTime = d3__WEBPACK_IMPORTED_MODULE_0__["timeFormat"]('%Y-%m');
        const xg = svg
            .append('g')
            .attr('class', 'x axis')
            .attr('transform', `translate(${Config.chartMarginL}, ${Config.chartHeight - Config.chartMarginB})`);
        d3__WEBPACK_IMPORTED_MODULE_0__["axisBottom"](tx)
            .tickArguments([d3__WEBPACK_IMPORTED_MODULE_0__["timeMonth"].every(4)])
            .tickSize(0)
            .tickPadding(8)
            .tickFormat(fomateTime)(xg);
        xg.selectAll('.tick text').attr('dx', 15);
        return tx;
    }
    function generateY() {
        const ty = d3__WEBPACK_IMPORTED_MODULE_0__["scaleLinear"]()
            .domain([0, 1.1 * d3__WEBPACK_IMPORTED_MODULE_0__["max"](ChartData[0].values, (d) => Number(d.person))])
            .range([Config.chartHeight - Config.chartMarginT - Config.chartMarginB, 0]);
        // -----y轴------
        const formate = d3__WEBPACK_IMPORTED_MODULE_0__["format"]('.' + d3__WEBPACK_IMPORTED_MODULE_0__["precisionFixed"](0.1) + 'f');
        const yg = svg
            .append('g')
            .attr('class', 'y axis')
            .attr('transform', `translate(${Config.chartMarginT}, ${Config.chartMarginL})`);
        d3__WEBPACK_IMPORTED_MODULE_0__["axisRight"](ty)
            .ticks(10, formate)
            .tickSizeInner(Config.chartWidth - Config.chartMarginR - Config.chartMarginL)
            .tickPadding(8)(yg);
        // 移除y轴的竖线
        yg.select('.domain').remove();
        // 对y轴tick中的line设置线的样式
        yg.selectAll('.tick:not(:first-of-type) line')
            .attr('stroke-opacity', 0.5)
            .attr('stroke-dasharray', '2,2');
        // 设置y轴的文字的位置
        yg.selectAll('.tick text').attr('x', 4).attr('dy', -4);
        return ty;
    }
    function generateLine() {
        // 折线
        const line = d3__WEBPACK_IMPORTED_MODULE_0__["line"]()
            .defined((d) => !isNaN(d.person))
            .x((d) => {
            return x(new Date(d.month)) + Config.chartMarginL;
        })
            .y((d) => {
            return y(d.person) + Config.chartMarginT;
        });
        svg.append('g')
            .selectAll('path')
            .data(ChartData)
            .enter()
            .append('path')
            .attr('stroke', 'steelblue')
            .attr('stroke-width', 1.5)
            .attr('d', function (d) {
            d.line = this;
            return line(d.values);
        });
    }
    function generatePoint() {
        // 点
        const sb = d3__WEBPACK_IMPORTED_MODULE_0__["symbol"]()
            .size(5)
            .type(d3__WEBPACK_IMPORTED_MODULE_0__["symbolCircle"]);
        svg.append('g')
            .selectAll('path')
            .data(ChartData[0].values)
            .enter()
            .append('path')
            .attr('class', 'point')
            .attr('transform', (d, i) => {
            return `translate(${x(new Date(d.month)) + Config.chartMarginL}, ${y(Number(d.person)) + Config.chartMarginT})`;
        })
            .attr('fill', '#fff')
            .attr('d', sb);
    }
    function generateTooltip() {
        const ttip = svg.append('g')
            .attr('transform', 'translate(-100,-100)')
            .attr('class', 'focus');
        ttip.append('circle')
            .style('fill', '#fff')
            .attr('r', 3.5);
        ttip.append('text')
            .attr('class', 'title')
            .attr('y', -20);
        ttip.append('text')
            .attr('class', 'content')
            .attr('y', -10);
        return ttip;
    }
    function handleInteractive() {
        // 处理交互事件
        const voronoi = d3__WEBPACK_IMPORTED_MODULE_0__["voronoi"]() // 泰森多边型
            .x((d) => {
            return x(new Date(d.month)) + Config.chartMarginL;
        })
            .y((d) => y(d.person) + Config.chartMarginT)
            .extent([[Config.chartMarginL, Config.chartMarginT], [Config.chartWidth - Config.chartMarginL, Config.chartHeight - Config.chartMarginT]]);
        const voronoiGroup = svg.append('g').attr('class', 'voronoi');
        voronoiGroup.selectAll('path')
            .data(voronoi.polygons(d3__WEBPACK_IMPORTED_MODULE_0__["merge"](ChartData.map((d) => d.values))))
            .enter()
            .append('path')
            .attr('d', (d) => {
            return d ? 'M' + d.join('L') + 'Z' : null;
        })
            .on('mouseover', (d) => {
            d3__WEBPACK_IMPORTED_MODULE_0__["select"](d.data.originLine.line).classed('city--hover', true);
            d.data.originLine.line.parentNode.appendChild(d.data.originLine.line);
            tooltip.attr('transform', 'translate(' + (x(new Date(d.data.month)) + Config.chartMarginL) + ',' + (y(d.data.person) + Config.chartMarginT) + ')');
            tooltip.select('text.title').text(d.data.originLine.name);
            tooltip.select('text.content').text(d.data.month + ': ' + d.data.person + '人');
        })
            .on('mouseout', (d) => {
            d3__WEBPACK_IMPORTED_MODULE_0__["select"](d.data.originLine.line).classed('city--hover', false);
            tooltip.attr('transform', 'translate(-100,-100)');
        });
    }
};
d3__WEBPACK_IMPORTED_MODULE_0__["json"]('./static/line.json').then((data) => {
    // 本例采用单根线，其实可以应用多根线，请自行拓展
    const d = [{
            name: '每月骑行人数',
            values: data.list,
        }];
    d.forEach((item) => {
        item.values.forEach((d) => {
            d.originLine = item;
        });
    });
    lineChart(config, d);
});
/* harmony default export */ __webpack_exports__["default"] = ({});


/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvbGluZS9pbmRleC5jc3M/N2M1YiIsIndlYnBhY2s6Ly8vLi9zcmMvbGluZS9pbmRleC5jc3MiLCJ3ZWJwYWNrOi8vLy4vc3JjL2xpbmUvaW5kZXgudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUNBLGNBQWMsbUJBQU8sQ0FBQyxvRUFBeUQ7O0FBRS9FLDRDQUE0QyxRQUFTOztBQUVyRDtBQUNBOzs7O0FBSUEsZUFBZTs7QUFFZjtBQUNBOztBQUVBLGFBQWEsbUJBQU8sQ0FBQyw4REFBbUQ7O0FBRXhFOztBQUVBLEdBQUcsSUFBVTtBQUNiLG1CQUFtQixvRUFBeUQ7QUFDNUUsbUJBQW1CLG1CQUFPLENBQUMsb0VBQXlEOztBQUVwRixvREFBb0QsUUFBUzs7QUFFN0Q7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBLEdBQUc7O0FBRUg7O0FBRUE7QUFDQSxFQUFFOztBQUVGLGdDQUFnQyxVQUFVLEVBQUU7QUFDNUMsQzs7Ozs7Ozs7Ozs7QUM1Q0EsMkJBQTJCLG1CQUFPLENBQUMsK0RBQW1EO0FBQ3RGO0FBQ0EsY0FBYyxRQUFTLFdBQVcsa0NBQWtDLEdBQUcsZ0JBQWdCLGtCQUFrQiw0QkFBNEIsdUJBQXVCLEdBQUcsdUJBQXVCLDRCQUE0QixHQUFHLDBDQUEwQyxpQkFBaUIsb0JBQW9CLGtDQUFrQyxHQUFHLG1CQUFtQixpQkFBaUIsMEJBQTBCLEdBQUcsMkJBQTJCLGtCQUFrQiwwQkFBMEIsR0FBRyxrQkFBa0Isa0JBQWtCLEdBQUcsYUFBYSxpQkFBaUIsbUJBQW1CLDZCQUE2Qiw0QkFBNEIsMEJBQTBCLEdBQUcsaUJBQWlCLDBCQUEwQiw0RUFBNEUsR0FBRzs7Ozs7Ozs7Ozs7OztBQ0Y1dkI7QUFBQTtBQUFBO0FBQUE7QUFBeUI7QUFDSjtBQUVyQixRQUFRLENBQUMsSUFBSSxDQUFDLFNBQVMsR0FBRyxFQUFFLENBQUM7QUF3QzdCLE1BQU0sTUFBTSxHQUFlO0lBQ3ZC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LENBQUMsQ0FBQzthQUNELEVBQUUsQ0FBQyxVQUFVLEVBQUUsQ0FBQyxDQUFNLEVBQUUsRUFBRTtZQUN2Qix5Q0FBUyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxDQUFDLE9BQU8sQ0FBQyxhQUFhLEVBQUUsS0FBSyxDQUFDLENBQUM7WUFDaEUsT0FBTyxDQUFDLElBQUksQ0FBQyxXQUFXLEVBQUUsc0JBQXNCLENBQUMsQ0FBQztRQUN0RCxDQUFDLENBQUMsQ0FBQztJQUNYLENBQUM7QUFDTCxDQUFDLENBQUM7QUFFRix1Q0FBTyxDQUFDLG9CQUFvQixDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsSUFBVSxFQUFFLEVBQUU7SUFDOUMsMEJBQTBCO0lBQzFCLE1BQU0sQ0FBQyxHQUFlLENBQUM7WUFDbkIsSUFBSSxFQUFFLFFBQVE7WUFDZCxNQUFNLEVBQUUsSUFBSSxDQUFDLElBQUk7U0FDcEIsQ0FBQyxDQUFDO0lBRUgsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLElBQUksRUFBRSxFQUFFO1FBQ2YsSUFBSSxDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRTtZQUN0QixDQUFDLENBQUMsVUFBVSxHQUFHLElBQVcsQ0FBQztRQUMvQixDQUFDLENBQUMsQ0FBQztJQUNQLENBQUMsQ0FBQyxDQUFDO0lBRUgsU0FBUyxDQUFDLE1BQU0sRUFBRSxDQUFDLENBQUMsQ0FBQztBQUN6QixDQUFDLENBQUMsQ0FBQztBQUVZLGlFQUFFLEVBQUMiLCJmaWxlIjoibGluZS5kOWY4NjVmYmJiYzgyOGFkZDVmNS5qcyIsInNvdXJjZXNDb250ZW50IjpbIlxudmFyIGNvbnRlbnQgPSByZXF1aXJlKFwiISEuLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L2Nqcy5qcyEuL2luZGV4LmNzc1wiKTtcblxuaWYodHlwZW9mIGNvbnRlbnQgPT09ICdzdHJpbmcnKSBjb250ZW50ID0gW1ttb2R1bGUuaWQsIGNvbnRlbnQsICcnXV07XG5cbnZhciB0cmFuc2Zvcm07XG52YXIgaW5zZXJ0SW50bztcblxuXG5cbnZhciBvcHRpb25zID0ge1wiaG1yXCI6dHJ1ZX1cblxub3B0aW9ucy50cmFuc2Zvcm0gPSB0cmFuc2Zvcm1cbm9wdGlvbnMuaW5zZXJ0SW50byA9IHVuZGVmaW5lZDtcblxudmFyIHVwZGF0ZSA9IHJlcXVpcmUoXCIhLi4vLi4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9saWIvYWRkU3R5bGVzLmpzXCIpKGNvbnRlbnQsIG9wdGlvbnMpO1xuXG5pZihjb250ZW50LmxvY2FscykgbW9kdWxlLmV4cG9ydHMgPSBjb250ZW50LmxvY2FscztcblxuaWYobW9kdWxlLmhvdCkge1xuXHRtb2R1bGUuaG90LmFjY2VwdChcIiEhLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9janMuanMhLi9pbmRleC5jc3NcIiwgZnVuY3Rpb24oKSB7XG5cdFx0dmFyIG5ld0NvbnRlbnQgPSByZXF1aXJlKFwiISEuLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L2Nqcy5qcyEuL2luZGV4LmNzc1wiKTtcblxuXHRcdGlmKHR5cGVvZiBuZXdDb250ZW50ID09PSAnc3RyaW5nJykgbmV3Q29udGVudCA9IFtbbW9kdWxlLmlkLCBuZXdDb250ZW50LCAnJ11dO1xuXG5cdFx0dmFyIGxvY2FscyA9IChmdW5jdGlvbihhLCBiKSB7XG5cdFx0XHR2YXIga2V5LCBpZHggPSAwO1xuXG5cdFx0XHRmb3Ioa2V5IGluIGEpIHtcblx0XHRcdFx0aWYoIWIgfHwgYVtrZXldICE9PSBiW2tleV0pIHJldHVybiBmYWxzZTtcblx0XHRcdFx0aWR4Kys7XG5cdFx0XHR9XG5cblx0XHRcdGZvcihrZXkgaW4gYikgaWR4LS07XG5cblx0XHRcdHJldHVybiBpZHggPT09IDA7XG5cdFx0fShjb250ZW50LmxvY2FscywgbmV3Q29udGVudC5sb2NhbHMpKTtcblxuXHRcdGlmKCFsb2NhbHMpIHRocm93IG5ldyBFcnJvcignQWJvcnRpbmcgQ1NTIEhNUiBkdWUgdG8gY2hhbmdlZCBjc3MtbW9kdWxlcyBsb2NhbHMuJyk7XG5cblx0XHR1cGRhdGUobmV3Q29udGVudCk7XG5cdH0pO1xuXG5cdG1vZHVsZS5ob3QuZGlzcG9zZShmdW5jdGlvbigpIHsgdXBkYXRlKCk7IH0pO1xufSIsImV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCIuLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L3J1bnRpbWUvYXBpLmpzXCIpKGZhbHNlKTtcbi8vIE1vZHVsZVxuZXhwb3J0cy5wdXNoKFttb2R1bGUuaWQsIFwiLmNoYXJ0IHtcXG4gICAgYmFja2dyb3VuZDpyZ2JhKDM3LDM5LDQ2LDEpO1xcbn1cXG5cXG4uY2hhcnQgdGV4dHtcXG4gICAgZmlsbDogd2hpdGU7XFxuICAgIGZvbnQ6IDEwcHggc2Fucy1zZXJpZjtcXG4gICAgdGV4dC1hbmNob3I6IGVuZDtcXG59XFxuXFxuLmNoYXJ0IC5heGlzIHRleHQge1xcbiAgICBmb250OiAxMHB4IHNhbnMtc2VyaWY7XFxufVxcblxcbi5jaGFydCAuYXhpcyBwYXRoLCAuY2hhcnQgLmF4aXMgbGluZSB7XFxuICAgIGZpbGw6IG5vbmU7XFxuICAgIHN0cm9rZTogd2hpdGU7XFxuICAgIHNoYXBlLXJlbmRlcmluZzogY3Jpc3BFZGdlcztcXG59XFxuXFxuLnZvcm9ub2kgcGF0aCB7XFxuICAgIGZpbGw6IG5vbmU7XFxuICAgIHBvaW50ZXItZXZlbnRzOiBhbGw7XFxufVxcbiAgXFxuLnZvcm9ub2ktLXNob3cgcGF0aCB7XFxuICAgIHN0cm9rZTogcmVkO1xcbiAgICBzdHJva2Utb3BhY2l0eTogMC4yO1xcbn1cXG5cXG4uY2l0eS0taG92ZXIge1xcbiAgICBzdHJva2U6IHJlZDtcXG59XFxuXFxuLmNpdGllcyB7XFxuICAgIGZpbGw6IG5vbmU7XFxuICAgIHN0cm9rZTogI2FhYTtcXG4gICAgc3Ryb2tlLWxpbmVqb2luOiByb3VuZDtcXG4gICAgc3Ryb2tlLWxpbmVjYXA6IHJvdW5kO1xcbiAgICBzdHJva2Utd2lkdGg6IDEuNXB4O1xcbn1cXG5cXG4uZm9jdXMgdGV4dCB7XFxuICAgIHRleHQtYW5jaG9yOiBtaWRkbGU7XFxuICAgIHRleHQtc2hhZG93OiAwIDFweCAwICNmZmYsIDFweCAwIDAgI2ZmZiwgMCAtMXB4IDAgI2ZmZiwgLTFweCAwIDAgI2ZmZjtcXG59XCIsIFwiXCJdKTtcbiIsImltcG9ydCAqIGFzIGQzIGZyb20gJ2QzJztcbmltcG9ydCAnLi9pbmRleC5jc3MnO1xuXG5kb2N1bWVudC5ib2R5LmlubmVySFRNTCA9ICcnO1xuXG5pbnRlcmZhY2UgRGF0YSB7XG4gICAgdHlwZTogc3RyaW5nO1xuICAgIGxpc3Q6IEFycmF5PHtcbiAgICAgICAgbW9udGg6IHN0cmluZyxcbiAgICAgICAgcGVyc29uOiBzdHJpbmcsXG4gICAgICAgIG9yaWdpbkxpbmU6IEFycmF5PHtcbiAgICAgICAgICAgIG1vbnRoOiBzdHJpbmcsXG4gICAgICAgICAgICBwZXJzb246IHN0cmluZyxcbiAgICAgICAgICAgIG9yaWdpbkxpbmU6IERhdGE7XG4gICAgICAgIH0+LFxuICAgIH0+O1xuICAgIFtwcm9wTmFtZTogc3RyaW5nXTogYW55O1xufVxuXG5pbnRlcmZhY2UgTGluZUNvbmZpZyB7XG4gICAgY2hhcnRXaWR0aDogbnVtYmVyO1xuICAgIGNoYXJ0SGVpZ2h0OiBudW1iZXI7XG4gICAgY2hhcnRNYXJnaW5MOiBudW1iZXI7XG4gICAgY2hhcnRNYXJnaW5SOiBudW1iZXI7XG4gICAgY2hhcnRNYXJnaW5UOiBudW1iZXI7XG4gICAgY2hhcnRNYXJnaW5COiBudW1iZXI7XG59XG5cbmludGVyZmFjZSBNdXRpTGluZSB7XG4gICAgbmFtZTogc3RyaW5nO1xuICAgIHZhbHVlczogQXJyYXk8e1xuICAgICAgICBtb250aDogc3RyaW5nLFxuICAgICAgICBwZXJzb246IHN0cmluZyxcbiAgICAgICAgb3JpZ2luTGluZTogQXJyYXk8e1xuICAgICAgICAgICAgbW9udGg6IHN0cmluZyxcbiAgICAgICAgICAgIHBlcnNvbjogc3RyaW5nLFxuICAgICAgICAgICAgb3JpZ2luTGluZTogRGF0YTtcbiAgICAgICAgfT4sXG4gICAgfT47XG4gICAgbGluZT86IFNWR1BhdGhFbGVtZW50O1xuICAgIFtwcm9wTmFtZTogc3RyaW5nXTogYW55O1xufVxuXG5jb25zdCBjb25maWc6IExpbmVDb25maWcgPSB7XG4gICAgY2hhcnRXaWR0aDogNjAwLFxuICAgIGNoYXJ0SGVpZ2h0OiAzMDAsXG4gICAgY2hhcnRNYXJnaW5MOiA1MCxcbiAgICBjaGFydE1hcmdpblI6IDUwLFxuICAgIGNoYXJ0TWFyZ2luVDogNTAsXG4gICAgY2hhcnRNYXJnaW5COiA1MCxcbn07XG5cbmNvbnN0IGxpbmVDaGFydCA9IChDb25maWc6IExpbmVDb25maWcsIENoYXJ0RGF0YTogTXV0aUxpbmVbXSkgPT4ge1xuICAgIGNvbnN0IHN2ZyA9IGdlbmVyYXRlU3ZnKCk7XG4gICAgY29uc3QgeCA9IGdlbmVyYXRlWCgpO1xuICAgIGNvbnN0IHkgPSBnZW5lcmF0ZVkoKTtcbiAgICBnZW5lcmF0ZUxpbmUoKTtcbiAgICBnZW5lcmF0ZVBvaW50KCk7XG4gICAgY29uc3QgdG9vbHRpcCA9IGdlbmVyYXRlVG9vbHRpcCgpO1xuICAgIGhhbmRsZUludGVyYWN0aXZlKCk7XG5cbiAgICBmdW5jdGlvbiBnZW5lcmF0ZVN2ZygpIHtcbiAgICAgICAgcmV0dXJuIGQzLnNlbGVjdCgnYm9keScpXG4gICAgICAgIC5hcHBlbmQoJ3N2ZycpXG4gICAgICAgIC5hdHRyKCdmaWxsJywgJ25vbmUnKVxuICAgICAgICAuYXR0cignc3Ryb2tlLWxpbmVqb2luJywgJ3JvdW5kJylcbiAgICAgICAgLmF0dHIoJ3N0cm9rZS1saW5lY2FwJywgJ3JvdW5kJylcbiAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ2NoYXJ0JylcbiAgICAgICAgLnN0eWxlKCd3aWR0aCcsIENvbmZpZy5jaGFydFdpZHRoKVxuICAgICAgICAuc3R5bGUoJ2hlaWdodCcsIENvbmZpZy5jaGFydEhlaWdodCk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2VuZXJhdGVYKCkge1xuICAgICAgICBjb25zdCB0eCA9IGQzLnNjYWxlVGltZSgpXG4gICAgICAgICAgICAuZG9tYWluKFtuZXcgRGF0ZShDaGFydERhdGFbMF0udmFsdWVzWzBdLm1vbnRoKSwgbmV3IERhdGUoQ2hhcnREYXRhWzBdLnZhbHVlc1tDaGFydERhdGFbMF0udmFsdWVzLmxlbmd0aCAtIDFdLm1vbnRoKV0pXG4gICAgICAgICAgICAucmFuZ2UoWzAsIGNvbmZpZy5jaGFydFdpZHRoIC0gY29uZmlnLmNoYXJ0TWFyZ2luUiAtIGNvbmZpZy5jaGFydE1hcmdpbkxdKTtcbiAgICAgICAgLy8gLS0tLS0teOi9tC0tLS0tLVxuICAgICAgICBjb25zdCBmb21hdGVUaW1lID0gZDMudGltZUZvcm1hdCgnJVktJW0nKTtcbiAgICAgICAgY29uc3QgeGcgPSBzdmdcbiAgICAgICAgICAgIC5hcHBlbmQoJ2cnKVxuICAgICAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ3ggYXhpcycpXG4gICAgICAgICAgICAuYXR0cigndHJhbnNmb3JtJywgYHRyYW5zbGF0ZSgke0NvbmZpZy5jaGFydE1hcmdpbkx9LCAke0NvbmZpZy5jaGFydEhlaWdodCAtIENvbmZpZy5jaGFydE1hcmdpbkJ9KWApO1xuICAgICAgICBkMy5heGlzQm90dG9tKHR4KVxuICAgICAgICAgICAgLnRpY2tBcmd1bWVudHMoW2QzLnRpbWVNb250aC5ldmVyeSg0KV0pXG4gICAgICAgICAgICAudGlja1NpemUoMClcbiAgICAgICAgICAgIC50aWNrUGFkZGluZyg4KVxuICAgICAgICAgICAgLnRpY2tGb3JtYXQoZm9tYXRlVGltZSBhcyBhbnkpKHhnKTtcbiAgICAgICAgeGcuc2VsZWN0QWxsKCcudGljayB0ZXh0JykuYXR0cignZHgnLCAxNSk7XG4gICAgICAgIHJldHVybiB0eDtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBnZW5lcmF0ZVkoKSB7XG4gICAgICAgIGNvbnN0IHR5ID0gZDMuc2NhbGVMaW5lYXIoKVxuICAgICAgICAuZG9tYWluKFswLCAxLjEgKiBkMy5tYXgoQ2hhcnREYXRhWzBdLnZhbHVlcywgKGQpID0+IE51bWJlcihkLnBlcnNvbikgYXMgYW55KV0pXG4gICAgICAgIC5yYW5nZShbQ29uZmlnLmNoYXJ0SGVpZ2h0IC0gQ29uZmlnLmNoYXJ0TWFyZ2luVCAtIENvbmZpZy5jaGFydE1hcmdpbkIsIDBdKTtcblxuICAgICAgICAvLyAtLS0tLXnovbQtLS0tLS1cbiAgICAgICAgY29uc3QgZm9ybWF0ZSA9IGQzLmZvcm1hdCgnLicgKyBkMy5wcmVjaXNpb25GaXhlZCgwLjEpICsgJ2YnKTtcbiAgICAgICAgY29uc3QgeWcgPSBzdmdcbiAgICAgICAgICAgIC5hcHBlbmQoJ2cnKVxuICAgICAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ3kgYXhpcycpXG4gICAgICAgICAgICAuYXR0cigndHJhbnNmb3JtJywgYHRyYW5zbGF0ZSgke0NvbmZpZy5jaGFydE1hcmdpblR9LCAke0NvbmZpZy5jaGFydE1hcmdpbkx9KWApO1xuXG4gICAgICAgIGQzLmF4aXNSaWdodCh0eSlcbiAgICAgICAgICAgIC50aWNrcygxMCwgZm9ybWF0ZSlcbiAgICAgICAgICAgIC50aWNrU2l6ZUlubmVyKENvbmZpZy5jaGFydFdpZHRoIC0gQ29uZmlnLmNoYXJ0TWFyZ2luUiAtIENvbmZpZy5jaGFydE1hcmdpbkwpXG4gICAgICAgICAgICAudGlja1BhZGRpbmcoOCkoeWcpO1xuXG4gICAgICAgIC8vIOenu+mZpHnovbTnmoTnq5bnur9cbiAgICAgICAgeWcuc2VsZWN0KCcuZG9tYWluJykucmVtb3ZlKCk7XG4gICAgICAgIC8vIOWvuXnovbR0aWNr5Lit55qEbGluZeiuvue9rue6v+eahOagt+W8j1xuICAgICAgICB5Zy5zZWxlY3RBbGwoJy50aWNrOm5vdCg6Zmlyc3Qtb2YtdHlwZSkgbGluZScpXG4gICAgICAgICAgICAuYXR0cignc3Ryb2tlLW9wYWNpdHknLCAwLjUpXG4gICAgICAgICAgICAuYXR0cignc3Ryb2tlLWRhc2hhcnJheScsICcyLDInKTtcbiAgICAgICAgLy8g6K6+572ueei9tOeahOaWh+Wtl+eahOS9jee9rlxuICAgICAgICB5Zy5zZWxlY3RBbGwoJy50aWNrIHRleHQnKS5hdHRyKCd4JywgNCkuYXR0cignZHknLCAtNCk7XG4gICAgICAgIHJldHVybiB0eTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBnZW5lcmF0ZUxpbmUoKSB7XG4gICAgICAgIC8vIOaKmOe6v1xuICAgICAgICBjb25zdCBsaW5lID0gZDMubGluZSgpXG4gICAgICAgICAgICAuZGVmaW5lZCgoZDogYW55KSA9PiAhaXNOYU4oZC5wZXJzb24pKVxuICAgICAgICAgICAgLngoKGQ6IGFueSkgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiB4KG5ldyBEYXRlKGQubW9udGgpKSArIENvbmZpZy5jaGFydE1hcmdpbkw7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLnkoKGQ6IGFueSkgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiB5KGQucGVyc29uKSArIENvbmZpZy5jaGFydE1hcmdpblQ7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICBzdmcuYXBwZW5kKCdnJylcbiAgICAgICAgICAgIC5zZWxlY3RBbGwoJ3BhdGgnKVxuICAgICAgICAgICAgLmRhdGEoQ2hhcnREYXRhKVxuICAgICAgICAgICAgLmVudGVyKClcbiAgICAgICAgICAgIC5hcHBlbmQoJ3BhdGgnKVxuICAgICAgICAgICAgLmF0dHIoJ3N0cm9rZScsICdzdGVlbGJsdWUnKVxuICAgICAgICAgICAgLmF0dHIoJ3N0cm9rZS13aWR0aCcsIDEuNSlcbiAgICAgICAgICAgIC5hdHRyKCdkJywgZnVuY3Rpb24oZDogYW55KSB7XG4gICAgICAgICAgICAgICAgZC5saW5lID0gdGhpcztcbiAgICAgICAgICAgICAgICByZXR1cm4gbGluZShkLnZhbHVlcyk7XG4gICAgICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBnZW5lcmF0ZVBvaW50KCkge1xuICAgICAgICAvLyDngrlcbiAgICAgICAgY29uc3Qgc2IgPSBkM1xuICAgICAgICAgICAgLnN5bWJvbCgpXG4gICAgICAgICAgICAuc2l6ZSg1KVxuICAgICAgICAgICAgLnR5cGUoZDMuc3ltYm9sQ2lyY2xlKTtcblxuICAgICAgICBzdmcuYXBwZW5kKCdnJylcbiAgICAgICAgICAgIC5zZWxlY3RBbGwoJ3BhdGgnKVxuICAgICAgICAgICAgLmRhdGEoQ2hhcnREYXRhWzBdLnZhbHVlcylcbiAgICAgICAgICAgIC5lbnRlcigpXG4gICAgICAgICAgICAuYXBwZW5kKCdwYXRoJylcbiAgICAgICAgICAgIC5hdHRyKCdjbGFzcycsICdwb2ludCcpXG4gICAgICAgICAgICAuYXR0cigndHJhbnNmb3JtJywgKGQsIGkpID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gYHRyYW5zbGF0ZSgke3gobmV3IERhdGUoZC5tb250aCkpICsgQ29uZmlnLmNoYXJ0TWFyZ2luTH0sICR7eShOdW1iZXIoZC5wZXJzb24pKSArIENvbmZpZy5jaGFydE1hcmdpblR9KWA7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmF0dHIoJ2ZpbGwnLCAnI2ZmZicpXG4gICAgICAgICAgICAuYXR0cignZCcsIHNiKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBnZW5lcmF0ZVRvb2x0aXAoKSB7XG4gICAgICAgIGNvbnN0IHR0aXAgPSBzdmcuYXBwZW5kKCdnJylcbiAgICAgICAgICAgIC5hdHRyKCd0cmFuc2Zvcm0nLCAndHJhbnNsYXRlKC0xMDAsLTEwMCknKVxuICAgICAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ2ZvY3VzJyk7XG5cbiAgICAgICAgdHRpcC5hcHBlbmQoJ2NpcmNsZScpXG4gICAgICAgICAgICAuc3R5bGUoJ2ZpbGwnLCAnI2ZmZicpXG4gICAgICAgICAgICAuYXR0cigncicsIDMuNSk7XG5cbiAgICAgICAgdHRpcC5hcHBlbmQoJ3RleHQnKVxuICAgICAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ3RpdGxlJylcbiAgICAgICAgICAgIC5hdHRyKCd5JywgLTIwKTtcblxuICAgICAgICB0dGlwLmFwcGVuZCgndGV4dCcpXG4gICAgICAgICAgICAuYXR0cignY2xhc3MnLCAnY29udGVudCcpXG4gICAgICAgICAgICAuYXR0cigneScsIC0xMCk7XG5cbiAgICAgICAgcmV0dXJuIHR0aXA7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaGFuZGxlSW50ZXJhY3RpdmUoKSB7XG4gICAgICAgIC8vIOWkhOeQhuS6pOS6kuS6i+S7tlxuICAgICAgICBjb25zdCB2b3Jvbm9pID0gZDMudm9yb25vaSgpIC8vIOazsOajruWkmui+ueWei1xuICAgICAgICAgICAgLngoKGQ6IGFueSkgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiB4KG5ldyBEYXRlKGQubW9udGgpKSArIENvbmZpZy5jaGFydE1hcmdpbkw7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLnkoKGQ6IGFueSkgPT4geShkLnBlcnNvbikgKyBDb25maWcuY2hhcnRNYXJnaW5UKVxuICAgICAgICAgICAgLmV4dGVudChbW0NvbmZpZy5jaGFydE1hcmdpbkwsIENvbmZpZy5jaGFydE1hcmdpblRdLCBbQ29uZmlnLmNoYXJ0V2lkdGggLSBDb25maWcuY2hhcnRNYXJnaW5MLCBDb25maWcuY2hhcnRIZWlnaHQgLSBDb25maWcuY2hhcnRNYXJnaW5UXV0pO1xuXG4gICAgICAgIGNvbnN0IHZvcm9ub2lHcm91cCA9IHN2Zy5hcHBlbmQoJ2cnKS5hdHRyKCdjbGFzcycsICd2b3Jvbm9pJyk7XG4gICAgICAgIHZvcm9ub2lHcm91cC5zZWxlY3RBbGwoJ3BhdGgnKVxuICAgICAgICAgICAgLmRhdGEodm9yb25vaS5wb2x5Z29ucyhkMy5tZXJnZShDaGFydERhdGEubWFwKChkKSA9PiBkLnZhbHVlcykpIGFzIGFueSkpXG4gICAgICAgICAgICAuZW50ZXIoKVxuICAgICAgICAgICAgLmFwcGVuZCgncGF0aCcpXG4gICAgICAgICAgICAuYXR0cignZCcsIChkOiBhbnkpID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZCA/ICdNJyArIGQuam9pbignTCcpICsgJ1onIDogbnVsbDtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAub24oJ21vdXNlb3ZlcicsIChkOiBhbnkpID0+IHtcbiAgICAgICAgICAgICAgICBkMy5zZWxlY3QoZC5kYXRhLm9yaWdpbkxpbmUubGluZSkuY2xhc3NlZCgnY2l0eS0taG92ZXInLCB0cnVlKTtcbiAgICAgICAgICAgICAgICBkLmRhdGEub3JpZ2luTGluZS5saW5lLnBhcmVudE5vZGUuYXBwZW5kQ2hpbGQoZC5kYXRhLm9yaWdpbkxpbmUubGluZSk7XG4gICAgICAgICAgICAgICAgdG9vbHRpcC5hdHRyKCd0cmFuc2Zvcm0nLCAndHJhbnNsYXRlKCcgKyAoeChuZXcgRGF0ZShkLmRhdGEubW9udGgpKSArIENvbmZpZy5jaGFydE1hcmdpbkwpICsgJywnICsgKHkoZC5kYXRhLnBlcnNvbikgKyBDb25maWcuY2hhcnRNYXJnaW5UKSArICcpJyk7XG4gICAgICAgICAgICAgICAgdG9vbHRpcC5zZWxlY3QoJ3RleHQudGl0bGUnKS50ZXh0KGQuZGF0YS5vcmlnaW5MaW5lLm5hbWUpO1xuICAgICAgICAgICAgICAgIHRvb2x0aXAuc2VsZWN0KCd0ZXh0LmNvbnRlbnQnKS50ZXh0KGQuZGF0YS5tb250aCArICc6ICcgKyBkLmRhdGEucGVyc29uICsgJ+S6uicpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5vbignbW91c2VvdXQnLCAoZDogYW55KSA9PiB7XG4gICAgICAgICAgICAgICAgZDMuc2VsZWN0KGQuZGF0YS5vcmlnaW5MaW5lLmxpbmUpLmNsYXNzZWQoJ2NpdHktLWhvdmVyJywgZmFsc2UpO1xuICAgICAgICAgICAgICAgIHRvb2x0aXAuYXR0cigndHJhbnNmb3JtJywgJ3RyYW5zbGF0ZSgtMTAwLC0xMDApJyk7XG4gICAgICAgICAgICB9KTtcbiAgICB9XG59O1xuXG5kMy5qc29uKCcuL3N0YXRpYy9saW5lLmpzb24nKS50aGVuKChkYXRhOiBEYXRhKSA9PiB7XG4gICAgLy8g5pys5L6L6YeH55So5Y2V5qC557q/77yM5YW25a6e5Y+v5Lul5bqU55So5aSa5qC557q/77yM6K+36Ieq6KGM5ouT5bGVXG4gICAgY29uc3QgZDogTXV0aUxpbmVbXSA9IFt7XG4gICAgICAgIG5hbWU6ICfmr4/mnIjpqpHooYzkurrmlbAnLFxuICAgICAgICB2YWx1ZXM6IGRhdGEubGlzdCxcbiAgICB9XTtcblxuICAgIGQuZm9yRWFjaCgoaXRlbSkgPT4ge1xuICAgICAgICBpdGVtLnZhbHVlcy5mb3JFYWNoKChkKSA9PiB7XG4gICAgICAgICAgICBkLm9yaWdpbkxpbmUgPSBpdGVtIGFzIGFueTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBsaW5lQ2hhcnQoY29uZmlnLCBkKTtcbn0pO1xuXG5leHBvcnQgZGVmYXVsdCB7fTtcbiJdLCJzb3VyY2VSb290IjoiIn0=