(window["webpackJsonp"] = window["webpackJsonp"] || []).push([["force"],{

/***/ "Cjzh":
/*!****************************!*\
  !*** ./src/force/index.ts ***!
  \****************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var d3__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! d3 */ "VphZ");

const chartWidth = 600;
const chartHeight = 600;
const color = d3__WEBPACK_IMPORTED_MODULE_0__["hsl"]('#fea').brighter(0.3);
d3__WEBPACK_IMPORTED_MODULE_0__["select"]('body')
    .append('canvas')
    .attr('class', 'chart')
    .style('background', color.toString())
    .attr('width', chartWidth)
    .attr('height', chartHeight);
const canvas = document.querySelector('canvas');
const context = canvas.getContext('2d');
const simulation = d3__WEBPACK_IMPORTED_MODULE_0__["forceSimulation"]()
    .force('link', d3__WEBPACK_IMPORTED_MODULE_0__["forceLink"]().id((d) => d.id))
    .force('charge', d3__WEBPACK_IMPORTED_MODULE_0__["forceManyBody"]())
    // .force('collide', d3.forceCollide(6))
    .force('radial', d3__WEBPACK_IMPORTED_MODULE_0__["forceRadial"](100, chartWidth / 2, chartHeight / 2));
// .force('center', d3.forceCenter(chartWidth / 2, chartHeight / 2));
d3__WEBPACK_IMPORTED_MODULE_0__["json"]('./static/force.json').then((res) => {
    simulation
        .nodes(res.nodes) // 指定node，初始化位置和速度
        .on('tick', () => {
        context.clearRect(0, 0, chartWidth, chartHeight);
        context.beginPath();
        res.links.forEach((d) => {
            context.moveTo(d.source.x, d.source.y);
            context.lineTo(d.target.x, d.target.y);
        });
        context.strokeStyle = '#aaa';
        context.stroke();
        context.beginPath();
        res.nodes.forEach((d) => {
            context.moveTo(d.x + 3, d.y);
            context.arc(d.x, d.y, 3, 0, 2 * Math.PI);
        });
        context.fill();
        context.strokeStyle = '#fff';
        context.stroke();
    });
    // 重新初始化
    simulation.force('link').links(res.links);
    d3__WEBPACK_IMPORTED_MODULE_0__["drag"]()
        .container(canvas)
        .subject(() => simulation.find(d3__WEBPACK_IMPORTED_MODULE_0__["event"].x, d3__WEBPACK_IMPORTED_MODULE_0__["event"].y)) // 找到最近的node
        .on('start', () => {
        if (!d3__WEBPACK_IMPORTED_MODULE_0__["event"].active) {
            // restart重启simulation
            simulation.alphaTarget(0.3).restart();
        }
        d3__WEBPACK_IMPORTED_MODULE_0__["event"].subject.fx = d3__WEBPACK_IMPORTED_MODULE_0__["event"].subject.x;
        d3__WEBPACK_IMPORTED_MODULE_0__["event"].subject.fy = d3__WEBPACK_IMPORTED_MODULE_0__["event"].subject.y;
    })
        .on('drag', () => {
        // 设置node的坐标
        d3__WEBPACK_IMPORTED_MODULE_0__["event"].subject.fx = d3__WEBPACK_IMPORTED_MODULE_0__["event"].x;
        d3__WEBPACK_IMPORTED_MODULE_0__["event"].subject.fy = d3__WEBPACK_IMPORTED_MODULE_0__["event"].y;
    })
        .on('end', () => {
        if (!d3__WEBPACK_IMPORTED_MODULE_0__["event"].active) {
            simulation.alphaTarget(0);
        }
        d3__WEBPACK_IMPORTED_MODULE_0__["event"].subject.fx = null;
        d3__WEBPACK_IMPORTED_MODULE_0__["event"].subject.fy = null;
    })(d3__WEBPACK_IMPORTED_MODULE_0__["select"](canvas));
});


/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvZm9yY2UvaW5kZXgudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUFBO0FBQUE7QUFBeUI7QUFFekIsTUFBTSxVQUFVLEdBQUcsR0FBRyxDQUFDO0FBQ3ZCLE1BQU0sV0FBVyxHQUFHLEdBQUcsQ0FBQztBQUN4QixNQUFNLEtBQUssR0FBRyxzQ0FBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQUMsQ0FBQztBQUMzQyx5Q0FBUyxDQUFDLE1BQU0sQ0FBQztLQUNaLE1BQU0sQ0FBQyxRQUFRLENBQUM7S0FDaEIsSUFBSSxDQUFDLE9BQU8sRUFBRSxPQUFPLENBQUM7S0FDdEIsS0FBSyxDQUFDLFlBQVksRUFBRSxLQUFLLENBQUMsUUFBUSxFQUFFLENBQUM7S0FDckMsSUFBSSxDQUFDLE9BQU8sRUFBRSxVQUFVLENBQUM7S0FDekIsSUFBSSxDQUFDLFFBQVEsRUFBRSxXQUFXLENBQUMsQ0FBQztBQUVqQyxNQUFNLE1BQU0sR0FBSSxRQUFRLENBQUMsYUFBYSxDQUFDLFFBQVEsQ0FBUyxDQUFDO0FBQ3pELE1BQU0sT0FBTyxHQUFHLE1BQU0sQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLENBQUM7QUFFeEMsTUFBTSxVQUFVLEdBQUcsa0RBQWtCLEVBQUU7S0FDbEMsS0FBSyxDQUFDLE1BQU0sRUFBRSw0Q0FBWSxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBTSxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUM7S0FDbEQsS0FBSyxDQUFDLFFBQVEsRUFBRSxnREFBZ0IsRUFBRSxDQUFDO0lBQ3BDLHdDQUF3QztLQUN2QyxLQUFLLENBQUMsUUFBUSxFQUFFLDhDQUFjLENBQUMsR0FBRyxFQUFFLFVBQVUsR0FBRyxDQUFDLEVBQUUsV0FBVyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDdkUscUVBQXFFO0FBRXpFLHVDQUFPLENBQUMscUJBQXFCLENBQUMs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QUM7U0FDN0I7UUFDRCx3Q0FBUSxDQUFDLE9BQU8sQ0FBQyxFQUFFLEdBQUcsSUFBSSxDQUFDO1FBQzNCLHdDQUFRLENBQUMsT0FBTyxDQUFDLEVBQUUsR0FBRyxJQUFJLENBQUM7SUFDL0IsQ0FBQyxDQUFDLENBQUMseUNBQVMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDO0FBQzlCLENBQUMsQ0FBQyxDQUFDIiwiZmlsZSI6ImZvcmNlLmQ5Zjg2NWZiYmJjODI4YWRkNWY1LmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgZDMgZnJvbSAnZDMnO1xuXG5jb25zdCBjaGFydFdpZHRoID0gNjAwO1xuY29uc3QgY2hhcnRIZWlnaHQgPSA2MDA7XG5jb25zdCBjb2xvciA9IGQzLmhzbCgnI2ZlYScpLmJyaWdodGVyKDAuMyk7XG5kMy5zZWxlY3QoJ2JvZHknKVxuICAgIC5hcHBlbmQoJ2NhbnZhcycpXG4gICAgLmF0dHIoJ2NsYXNzJywgJ2NoYXJ0JylcbiAgICAuc3R5bGUoJ2JhY2tncm91bmQnLCBjb2xvci50b1N0cmluZygpKVxuICAgIC5hdHRyKCd3aWR0aCcsIGNoYXJ0V2lkdGgpXG4gICAgLmF0dHIoJ2hlaWdodCcsIGNoYXJ0SGVpZ2h0KTtcblxuY29uc3QgY2FudmFzID0gKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2NhbnZhcycpIGFzIGFueSk7XG5jb25zdCBjb250ZXh0ID0gY2FudmFzLmdldENvbnRleHQoJzJkJyk7XG5cbmNvbnN0IHNpbXVsYXRpb24gPSBkMy5mb3JjZVNpbXVsYXRpb24oKVxuICAgIC5mb3JjZSgnbGluaycsIGQzLmZvcmNlTGluaygpLmlkKChkOiBhbnkpID0+IGQuaWQpKVxuICAgIC5mb3JjZSgnY2hhcmdlJywgZDMuZm9yY2VNYW55Qm9keSgpKVxuICAgIC8vIC5mb3JjZSgnY29sbGlkZScsIGQzLmZvcmNlQ29sbGlkZSg2KSlcbiAgICAuZm9yY2UoJ3JhZGlhbCcsIGQzLmZvcmNlUmFkaWFsKDEwMCwgY2hhcnRXaWR0aCAvIDIsIGNoYXJ0SGVpZ2h0IC8gMikpO1xuICAgIC8vIC5mb3JjZSgnY2VudGVyJywgZDMuZm9yY2VDZW50ZXIoY2hhcnRXaWR0aCAvIDIsIGNoYXJ0SGVpZ2h0IC8gMikpO1xuXG5kMy5qc29uKCcuL3N0YXRpYy9mb3JjZS5qc29uJykudGhlbigocmVzKSA9PiB7XG4gICAgc2ltdWxhdGlvblxuICAgICAgICAubm9kZXMocmVzLm5vZGVzKSAvLyDmjIflrppub2Rl77yM5Yid5aeL5YyW5L2N572u5ZKM6YCf5bqmXG4gICAgICAgIC5vbigndGljaycsICgpID0+IHtcbiAgICAgICAgICAgIGNvbnRleHQuY2xlYXJSZWN0KDAsIDAsIGNoYXJ0V2lkdGgsIGNoYXJ0SGVpZ2h0KTtcbiAgICAgICAgICAgIGNvbnRleHQuYmVnaW5QYXRoKCk7XG4gICAgICAgICAgICByZXMubGlua3MuZm9yRWFjaCgoZDogYW55KSA9PiB7XG4gICAgICAgICAgICAgICAgY29udGV4dC5tb3ZlVG8oZC5zb3VyY2UueCwgZC5zb3VyY2UueSk7XG4gICAgICAgICAgICAgICAgY29udGV4dC5saW5lVG8oZC50YXJnZXQueCwgZC50YXJnZXQueSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGNvbnRleHQuc3Ryb2tlU3R5bGUgPSAnI2FhYSc7XG4gICAgICAgICAgICBjb250ZXh0LnN0cm9rZSgpO1xuXG4gICAgICAgICAgICBjb250ZXh0LmJlZ2luUGF0aCgpO1xuICAgICAgICAgICAgcmVzLm5vZGVzLmZvckVhY2goKGQ6IGFueSkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnRleHQubW92ZVRvKGQueCArIDMsIGQueSk7XG4gICAgICAgICAgICAgICAgY29udGV4dC5hcmMoZC54LCBkLnksIDMsIDAsIDIgKiBNYXRoLlBJKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgY29udGV4dC5maWxsKCk7XG4gICAgICAgICAgICBjb250ZXh0LnN0cm9rZVN0eWxlID0gJyNmZmYnO1xuICAgICAgICAgICAgY29udGV4dC5zdHJva2UoKTtcbiAgICAgICAgfSk7XG5cbiAgICAvLyDph43mlrDliJ3lp4vljJZcbiAgICAoc2ltdWxhdGlvbi5mb3JjZSgnbGluaycpIGFzIGFueSkubGlua3MocmVzLmxpbmtzKTtcblxuICAgIGQzLmRyYWcoKVxuICAgICAgICAuY29udGFpbmVyKGNhbnZhcylcbiAgICAgICAgLnN1YmplY3QoKCkgPT4gc2ltdWxhdGlvbi5maW5kKGQzLmV2ZW50LngsIGQzLmV2ZW50LnkpKSAvLyDmib7liLDmnIDov5HnmoRub2RlXG4gICAgICAgIC5vbignc3RhcnQnLCAoKSA9PiB7XG4gICAgICAgICAgICBpZiAoIWQzLmV2ZW50LmFjdGl2ZSkge1xuICAgICAgICAgICAgICAgIC8vIHJlc3RhcnTph43lkK9zaW11bGF0aW9uXG4gICAgICAgICAgICAgICAgc2ltdWxhdGlvbi5hbHBoYVRhcmdldCgwLjMpLnJlc3RhcnQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGQzLmV2ZW50LnN1YmplY3QuZnggPSBkMy5ldmVudC5zdWJqZWN0Lng7XG4gICAgICAgICAgICBkMy5ldmVudC5zdWJqZWN0LmZ5ID0gZDMuZXZlbnQuc3ViamVjdC55O1xuICAgICAgICB9KVxuICAgICAgICAub24oJ2RyYWcnLCAoKSA9PiB7XG4gICAgICAgICAgICAvLyDorr7nva5ub2Rl55qE5Z2Q5qCHXG4gICAgICAgICAgICBkMy5ldmVudC5zdWJqZWN0LmZ4ID0gZDMuZXZlbnQueDtcbiAgICAgICAgICAgIGQzLmV2ZW50LnN1YmplY3QuZnkgPSBkMy5ldmVudC55O1xuICAgICAgICB9KVxuICAgICAgICAub24oJ2VuZCcsICgpID0+IHtcbiAgICAgICAgICAgIGlmICghZDMuZXZlbnQuYWN0aXZlKSB7XG4gICAgICAgICAgICAgICAgc2ltdWxhdGlvbi5hbHBoYVRhcmdldCgwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGQzLmV2ZW50LnN1YmplY3QuZnggPSBudWxsO1xuICAgICAgICAgICAgZDMuZXZlbnQuc3ViamVjdC5meSA9IG51bGw7XG4gICAgICAgIH0pKGQzLnNlbGVjdChjYW52YXMpKTtcbn0pOyJdLCJzb3VyY2VSb290IjoiIn0=