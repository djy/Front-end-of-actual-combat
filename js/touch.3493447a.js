(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["touch"],{"0921":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",{staticStyle:{padding:"0"},attrs:{fluid:"","fill-height":"",id:"touch","grid-list-md":""}},[n("Blog",{attrs:{items:t.items,time:t.time,title:t.title}},[n("div",{staticClass:"blogcontent"},[n("v-layout",{attrs:{row:"",wrap:""}},[n("v-flex",{attrs:{xs12:""}},[n("v-hover",{scopedSlots:t._u([{key:"default",fn:function(e){var a=e.hover;return n("v-card",{class:"elevation-"+(a?12:2),attrs:{"min-height":"200"}},[n("v-card-title",[n("h3",{attrs:{id:"Touch"}},[t._v("touch事件实现画直线")])]),n("v-divider"),n("v-card-text",{staticStyle:{position:"relative"}},[n("p",{staticClass:"body-1"},[t._v("1. touch事件是针对手机的触摸点，可以实现多点触控")]),n("p",{staticClass:"body-1"},[t._v("2. 下面代码实现在canvas中利用多个手指同时画直线的功能，请自行在移动设备上运行")]),n("canvas",{staticStyle:{border:"solid black 1px"},attrs:{id:"canvas",width:"600",height:"600"}}),n("v-flex",{attrs:{xs12:""}},[n("v-tabs",{attrs:{color:"light-green darken-1",dark:"","slider-color":"yellow"}},[n("v-tab",{key:"js",attrs:{ripple:""}},[t._v("JAVASCRIPT")]),n("v-tab",{key:"html",attrs:{ripple:""}},[t._v("HTML")]),n("v-tab-item",{key:"js"},[n("v-card",{attrs:{flat:""}},[n("v-card-text",[n("pre",{staticClass:"code"},[t._v(t._s(t.pres[0]))])])],1)],1),n("v-tab-item",{key:"html"},[n("v-card",{attrs:{flat:""}},[n("v-card-text",[n("pre",{staticClass:"code"},[t._v(t._s(t.pres[1]))])])],1)],1)],1)],1)],1)],1)}}])})],1)],1)],1)])],1)},c=[],o=(n("6c7b"),n("fd3f")),i={components:{Blog:o["a"]},data:function(){return{rect:null,time:"2019-5-10",title:"利用touch事件实现canvas画板",items:[{title:"touch事件实现画直线",target:"#Touch"},{divider:!0}],pres:['\n    const canvas = document.getElementsByTagName("canvas")[0];\n    const ctx = canvas.getContext("2d");\n    let fingerTouchPoints = [];\n\n    // 当用户手指触摸屏幕时触发\n    canvas.addEventListener("touchstart", (e) => {\n        e.preventDefault();\n        const touches = e.changedTouches; // 用户手指触摸点\n                \n        for (let i = 0; i < touches.length; i++) {                  // 遍历所有触摸点\n            const touch = touches[i];\n            const cRect = canvas.getBoundingClientRect();           // 获取canvas可视化大小的对象\n            const x = Math.round(touch.clientX - cRect.left);       // 获取触摸点相对于canvas的x坐标\n            const y = Math.round(touch.clientY - cRect.top);        // 获取触摸点相对于canvas的y坐标\n\n            fingerTouchPoints.push({ \n                color: `rgb(${Math.floor(Math.random()*255)}, ${Math.floor(Math.random()*255)},${Math.floor(Math.random()*255)})`, \n                pageX: x, \n                pageY: y \n            }); // 将触摸点的信息存在数组中\n\n            ctx.beginPath();\n            ctx.arc(x, y, 4, 0, 2 * Math.PI, false);\n            ctx.fill(); // 画一个圆点\n        } \n    }, false);\n\n    // 当用户手指滑动时触发\n    canvas.addEventListener("touchmove", (e) => {\n        console.log(e);\n        e.preventDefault();\n        if(fingerTouchPoints.length === 0) { return; }\n        const touches = e.changedTouches;   \n        for (let i = 0; i < touches.length; i++) {\n            const touch = touches[i];\n            const cRect = canvas.getBoundingClientRect(); \n            const x = Math.round(touch.clientX - cRect.left);      \n            const y = Math.round(touch.clientY - cRect.top);\n            \n            ctx.beginPath();\n            ctx.moveTo(fingerTouchPoints.slice(i, i+1)[0].pageX, fingerTouchPoints.slice(i, i+1)[0].pageY);\n            ctx.lineTo(x, y);\n            ctx.strokeStyle = fingerTouchPoints[i].color;\n            ctx.lineWidth = 4;\n            ctx.stroke();\n\n            // 替换新的触摸点\n            fingerTouchPoints.splice(i, 1, { color: fingerTouchPoints[i].color, pageX: x, pageY: y });\n        }\n    }, false);\n\n    // 当有一个手指松开就触发了\n    canvas.addEventListener("touchend", (e) => {\n        e.preventDefault();\n        fingerTouchPoints = [];\n    }, false);\n\n    // 不明因素结束了用户触摸触发\n    canvas.addEventListener("touchcancel", (e) => {\n        e.preventDefault();\n        fingerTouchPoints = [];\n    }, false);\n','\n    <canvas id="canvas" width="600" height="600" style="border:solid black 1px;"></canvas>\n']}},mounted:function(){var t=document.getElementsByTagName("canvas")[0],e=t.getContext("2d"),n=[];t.addEventListener("touchstart",function(a){a.preventDefault();for(var c=a.changedTouches,o=0;o<c.length;o++){var i=c[o],r=t.getBoundingClientRect(),s=Math.round(i.clientX-r.left),l=Math.round(i.clientY-r.top);n.push({color:"rgb(".concat(Math.floor(255*Math.random()),", ").concat(Math.floor(255*Math.random()),",").concat(Math.floor(255*Math.random()),")"),pageX:s,pageY:l}),e.beginPath(),e.arc(s,l,4,0,2*Math.PI,!1),e.fill()}},!1),t.addEventListener("touchmove",function(a){if(a.preventDefault(),0!==n.length)for(var c=a.changedTouches,o=0;o<c.length;o++){var i=c[o],r=t.getBoundingClientRect(),s=Math.round(i.clientX-r.left),l=Math.round(i.clientY-r.top);e.beginPath(),e.moveTo(n.slice(o,o+1)[0].pageX,n.slice(o,o+1)[0].pageY),e.lineTo(s,l),e.strokeStyle=n[o].color,e.lineWidth=4,e.stroke(),n.splice(o,1,{color:n[o].color,pageX:s,pageY:l})}},!1),t.addEventListener("touchend",function(t){t.preventDefault(),n=[]},!1),t.addEventListener("touchcancel",function(t){t.preventDefault(),n=[]},!1)},methods:{},destroyed:function(){}},r=i,s=(n("52e3"),n("2877")),l=n("6544"),h=n.n(l),d=n("b0af"),u=n("99d9"),v=n("12b2"),f=n("a523"),g=n("ce7e"),p=n("0e8f"),m=n("ce87"),x=n("a722"),b=n("71a3"),T=n("c671"),y=n("fe57"),M=Object(s["a"])(r,a,c,!1,null,null,null);e["default"]=M.exports;h()(M,{VCard:d["a"],VCardText:u["a"],VCardTitle:v["a"],VContainer:f["a"],VDivider:g["a"],VFlex:p["a"],VHover:m["a"],VLayout:x["a"],VTab:b["a"],VTabItem:T["a"],VTabs:y["a"]})},"36bd":function(t,e,n){"use strict";var a=n("4bf8"),c=n("77f1"),o=n("9def");t.exports=function(t){var e=a(this),n=o(e.length),i=arguments.length,r=c(i>1?arguments[1]:void 0,n),s=i>2?arguments[2]:void 0,l=void 0===s?n:c(s,n);while(l>r)e[r++]=t;return e}},"52e3":function(t,e,n){"use strict";var a=n("fce4"),c=n.n(a);c.a},"6c7b":function(t,e,n){var a=n("5ca1");a(a.P,"Array",{fill:n("36bd")}),n("9c6c")("fill")},fce4:function(t,e,n){}}]);
//# sourceMappingURL=touch.3493447a.js.map